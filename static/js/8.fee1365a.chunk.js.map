{"version":3,"sources":["assets/icons/edit.svg","modules/user-profile/Profile/ExtraInfo/styles.js","modules/user-profile/Profile/ProfilePicture/styles.ts","modules/user-profile/hoc/styles.ts","modules/user-profile/hoc/withUpload.tsx","modules/user-profile/Profile/ProfilePicture/index.tsx","modules/user-profile/Profile/styles.js","modules/user-profile/Profile/index.jsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","fill","_ref3","_ref","svgRef","title","props","height","viewBox","width","ref","ForwardRef","forwardRef","styled","div","theme","onSurfaceMD","onSurface","EditIcon","ProfilePictureContainer","getOverlay","surface","overlay","StyledProfilePicture","ProfileImage","UpdateImageButton","Button","ErrorType","PreviewImageModal","PreviewImage","img","ActionsBar","WrongImageFormat","p","error","withUpload","supportedExtensions","uploadApiFunction","Component","dispatch","useDispatch","useState","setError","uploadedFile","setUploadedFile","modalOpen","setModalOpen","openInput","useCallback","input","document","getElementById","click","onChange","e","file","files","includes","type","NOT_SUPPORTED_EXTENSIONS","toggleModal","newState","console","group","log","groupEnd","oldState","confirmUpload","fd","FormData","fileName","Math","random","append","then","data","enqueueSnackbarMessage","success","updateUserData","imageName","modalsContainer","ReactDOM","createPortal","Modal","isOpen","stateChanged","id","hidden","src","URL","createObjectURL","alt","text","onClick","toggleFileUpload","UserAPI","uploadImage","shape","color","Wrapper","secondary","Profile","useSelector","loggedInUser","auth","username","email"],"mappings":"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","file":"static/js/8.fee1365a.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n});\n\nvar SvgEdit = function SvgEdit(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    width: \"100%\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEdit, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/edit.26b7b668.svg\";\nexport { ForwardRef as ReactComponent };","import styled from 'styled-components';\nimport { ReactComponent as EditIcon } from 'assets/icons/edit.svg';\n\n\n// 2 columns grid with left side being extra info name (ex: Name, Age, Sex)\n// and right side being extra info value (ex: Stefan, 28, Male)\nexport const ExtraInfoContainer = styled.div`\n  display: grid;\n  grid-template-columns: min-content min-content;\n  grid-template-rows: repeat(4, min-content);\n  grid-row-gap: 15px;\n  grid-column-gap: 15px;\n  align-items: baseline;\n  //Position itself in parent's grid\n  grid-area: 3 / 1 / 3 / -1;\n`;\n\n// Left part of the grid\nexport const ExtraInfoKey = styled.div`\n  grid-column: 1 / 1;\n  white-space: nowrap;\n  font-size: 1rem;\n  font-family: 'Lato', sans-serif;\n  color: ${props => props.theme.onSurfaceMD}; \n`;\n\n// Right part of the grid\nexport const ExtraInfoValue = styled.div`\n  grid-columns: 2 / 2;\n  white-space: nowrap;\n  font-size: 1rem;\n  font-family: 'Lato', sans-serif;\n  color: ${props => props.theme.onSurface};\n  \n  cursor: pointer;\n  text-decoration: underline;\n  text-decoration-color: transparent;\n  transition: all 100ms;\n  &:hover {\n    text-decoration-color: ${props => props.theme.onSurface};\n  }\n  &:hover svg {\n    opacity: 1;\n  }\n`;\n\nexport const EditBtn = styled(EditIcon)`\n  width: 24px;\n  height: 24px;\n  opacity: 0;\n  transition: opacity 100ms;\n  fill: ${props => props.theme.onSurface}\n`;\n","import styled from 'styled-components';\nimport { Button } from 'components/basic';\nimport { ProfileImage } from 'components/basic';\nimport { getOverlay } from 'utils/colorUtils';\n\nexport const ProfilePictureContainer = styled.div`\n  // grid-area: 1 / 1 / 1 / 1;\n  position: relative;\n  // min-width: 150px;\n  padding-top: 75%;\n  cursor: pointer;\n\n  border: 10px solid ${({ theme }) => getOverlay(theme.surface, theme.overlay,\n  0.35)};\n  border-radius: 5px;\n`;\n\nexport const StyledProfilePicture = styled(ProfileImage)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%!important;\n  height: 100%!important;\n  object-fit: fill;\n`\n\nexport const UpdateImageButton = styled(Button)`\n  grid-area: 2 / 1 / 2 / 2;\n  justify-self: center;\n`;\n\n","import styled from 'styled-components';\n\nexport const PreviewImageModal = styled.div`\n  position: relative;\n  width: 20vmax;\n  padding-top: 75%; // 4 : 3\n`;\n\nexport const PreviewImage = styled.img`\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n`;\n\nexport const ActionsBar = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 24px;\n`;\n\nexport const WrongImageFormat = styled.p`\n  font-size: 1.3rem;\n  font-family: 'Roboto', sans-serif;\n  color: ${props => props.theme.error};\n  text-align: center;\n  text-align: center;\n`;","import React, { useCallback, useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useDispatch } from 'react-redux';\nimport { enqueueSnackbarMessage } from 'reducers/uiReducer';\nimport { updateUserData } from 'reducers/userReducer';\nimport Modal, { modalsContainer } from 'components/basic/Modal';\nimport { Button } from 'components/basic';\nimport { ActionsBar, PreviewImage, PreviewImageModal, WrongImageFormat } from './styles';\n\nenum ErrorType {\n  NOT_SUPPORTED_EXTENSIONS = 'Not supported extension'\n}\n\nconst WithUpload =\n  (supportedExtensions: Array<string>, uploadApiFunction: (formData: FormData) => Promise<any>) =>\n    (Component: React.ComponentClass<{ toggleFileUpload: () => void }>) =>\n      function InnerComponent(props :any) {\n        const dispatch = useDispatch();\n        const [error, setError] = useState<string | null>(null);\n        const [uploadedFile, setUploadedFile] = useState<Blob | null>(null);\n        const [modalOpen, setModalOpen] = useState(false);\n\n\n        const openInput = useCallback(() => {\n          const input = document.getElementById('file_input_id');\n          if (!input) return;\n          input.click();\n        }, []);\n\n        const onChange = useCallback(e => {\n          const file: File = e.target.files[0];\n          setError(null);\n          setUploadedFile(null);\n          if (supportedExtensions.includes(file.type)) {\n            setUploadedFile(file);\n          } else {\n            setError(ErrorType.NOT_SUPPORTED_EXTENSIONS);\n          }\n        }, []);\n\n        const toggleModal = useCallback(newState => {\n          console.group('state chagned');\n          console.log(newState);\n          console.groupEnd();\n          setModalOpen(oldState => newState || !oldState)\n        }, []);\n\n        const confirmUpload = useCallback(() => {\n          const fd = new FormData();\n          const fileName = `image_${Math.random()}_.jpg`;\n          // const fileName = `image_${username}_${Math.random()}.jpg`;\n          // @ts-ignore\n          fd.append('file', uploadedFile, fileName);\n          uploadApiFunction(fd).then(({ data }) => {\n            if (data.error) {\n              setError(data.error);\n            } else {\n              // @ts-ignore\n              dispatch(enqueueSnackbarMessage(data.success));\n              dispatch(\n                updateUserData('photoUrl', { imageName: fileName }));\n              toggleModal(false);\n            }\n          });\n        }, [uploadedFile]);\n\n        return (\n          <>\n            {modalsContainer !== null && ReactDOM.createPortal(\n              // @ts-ignore\n              <Modal isOpen={modalOpen}\n                     stateChanged={toggleModal}\n              >\n                <input id='file_input_id' type='file' onChange={onChange} hidden/>\n                {error\n                  ? <WrongImageFormat>{error}</WrongImageFormat>\n                  : (\n                    <>\n                      <PreviewImageModal>\n                        <PreviewImage\n                          //@ts-ignore\n                          src={uploadedFile\n                            ? URL.createObjectURL(uploadedFile)\n                            : null}\n                          alt='preview image'/>\n                      </PreviewImageModal>\n                      <ActionsBar>\n                        <Button\n                          // @ts-ignore\n                          type='text'\n                          text='cancel'\n                          onClick={toggleModal}\n                        />\n                        <Button\n                          // @ts-ignore\n                          type='contained'\n                          text='confirm'\n                          onClick={confirmUpload}\n                        />\n                      </ActionsBar>\n                    </>\n                  )}\n              </Modal>,\n              modalsContainer)}\n            <Component {...props} toggleFileUpload={openInput}/>\n          </>\n        );\n      };\n\nexport default WithUpload;","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateUserData } from 'reducers/userReducer';\nimport { enqueueSnackbarMessage } from '../../../../reducers/uiReducer';\nimport UserAPI from 'api/UserAPI';\nimport {\n  ProfilePictureContainer,\n  UpdateImageButton,\n  StyledProfilePicture,\n} from './styles';\nimport withUpload from '../../hoc/withUpload';\n\nconst ProfilePicture = (props: { toggleFileUpload: () => void }) => {\n  // const { username, userImages } = useSelector(\n  //   ({ auth: { loggedInUser } }) => ({\n  //     username: loggedInUser.username,\n  //     userImages: loggedInUser.userImages,\n  //   }));\n\n  // const [openInput] = useUploadWithPreview(['image/jpeg', 'image/png'], UserAPI.uploadImage)\n\n  return (\n    <>\n      <ProfilePictureContainer>\n        <StyledProfilePicture shape='rectangle'/>\n      </ProfilePictureContainer>\n      <UpdateImageButton\n        //@ts-ignore\n        onClick={props.toggleFileUpload}\n        type='text'\n        color='secondary'\n        text='update'\n      />\n    </>\n  );\n};\n\n// @ts-ignore\nexport default withUpload(['image/jpeg', 'image/png'], UserAPI.uploadImage)(ProfilePicture);\n","import styled from 'styled-components';\nimport { Button } from 'components/basic';\nimport { getOverlay } from 'utils/colorUtils';\n\nexport const Wrapper = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, minmax(min-content, 1fr));\n  grid-template-rows: repeat(6, min-content);\n  grid-gap: 10px;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const BaseInfo = styled.div`\n  grid-area: 1 / 2 / span 1 / span 2;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n`;\n\nexport const BaseInfoLine = styled.div`\n  text-align: left;\n  font-size: 1.2rem;\n  font-family: 'Lobster', cursive;\n  color: ${props => props.theme.secondary};\n`;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport ExtraInfo from './ExtraInfo';\nimport ProfilePicture from './ProfilePicture';\nimport {\n  BaseInfo,\n  BaseInfoLine,\n  Wrapper,\n} from './styles';\n\n\nconst Profile = props => {\n\n  const { username, email } = useSelector(({ auth: { loggedInUser }}) => ({\n    username: loggedInUser.username,\n    email: loggedInUser.email\n  }));\n\n  return (\n    <Wrapper>\n      {/*<Card>*/}\n        <ProfilePicture/>\n      {/*</Card>*/}\n      {/*<BaseInfo>*/}\n      {/*  <BaseInfoLine title='You need to go to security to change username'>{username}</BaseInfoLine>*/}\n      {/*  <BaseInfoLine title='You need to go to security to change email'>{email}</BaseInfoLine>*/}\n      {/*</BaseInfo>*/}\n      {/*<ExtraInfo/>*/}\n    </Wrapper>\n  );\n};\n\nexport default Profile;\n"],"sourceRoot":""}